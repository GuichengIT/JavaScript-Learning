<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>手写Promise加载一张图片</title>
</head>
<body>

<script type="text/javascript">
  function loadImg(src) {
    return new Promise ((resolve, reject) => {
      const img = document.createElement('img');
      img.src = src;
      img.onload = () => {
        resolve(img);
      };
      img.onerror = () => {
        const error = new Error('出错了');
        reject(error);
      };
    });
  }
  const url1 = 'https://images.cnblogs.com/cnblogs_com/zhangguicheng/1618684/o_191224141901%E6%9E%97%E4%BF%8A%E6%9D%B066_66.jpg';
  const url2 = 'https://images.cnblogs.com/cnblogs_com/zhangguicheng/1618684/o_200104014755%E7%88%B1%E4%BD%A0%E8%A1%A8%E6%83%85.gif';
  loadImg(url1).then((img) => {
    console.log(img.width);
    return img;
  }).then((img) => {
    console.log(img.height);
    return loadImg(url2);
  }).then((img2) => {
    console.log(img2.width);
    return img2;
  }).then((img2) => {
    console.log(img2.height);
  }).catch((error) => {
    console.error(error);
  })
</script>
  

</body>
</html>